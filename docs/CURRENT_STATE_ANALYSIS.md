# –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-01-21  
**–°—Ç–∞—Ç—É—Å:** –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–ª—é—á–µ–≤—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤—ã, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π CRUD –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

---

## üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:** 12
- **Frontend —Å—Ç—Ä–∞–Ω–∏—Ü:** 9 (–≤–∫–ª—é—á–∞—è BD Accounts)
- **API Endpoints:** ~55+
- **Event —Ç–∏–ø–æ–≤:** 30+
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:** ~50%

---

## üèóÔ∏è –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ –¥–æ–º–µ–Ω–∞–º

### 1. Identity & Access (Auth Service)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –í—Ö–æ–¥ (signin)
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã (access + refresh)
- ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
- ‚úÖ –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (RBAC)

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå MFA (Multi-Factor Authentication) - TODO –≤ –∫–æ–¥–µ
- ‚ùå OAuth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (Google, GitHub, Telegram)
- ‚ùå Password reset —á–µ—Ä–µ–∑ email
- ‚ùå Email verification
- ‚ùå Audit logs –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚ùå Rate limiting –Ω–∞ auth endpoints
- ‚ùå Account lockout –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ (MFA –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è enterprise)

---

### 2. Organizations & Companies (CRM Service)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤—ã–π CRUD —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ GET `/api/crm/companies` - —Å–ø–∏—Å–æ–∫
- ‚úÖ POST `/api/crm/companies` - —Å–æ–∑–¥–∞–Ω–∏–µ
- ‚úÖ GET `/api/crm/contacts` - —Å–ø–∏—Å–æ–∫
- ‚úÖ POST `/api/crm/contacts` - —Å–æ–∑–¥–∞–Ω–∏–µ
- ‚úÖ GET `/api/crm/deals` - —Å–ø–∏—Å–æ–∫
- ‚úÖ POST `/api/crm/deals` - —Å–æ–∑–¥–∞–Ω–∏–µ
- ‚úÖ PATCH `/api/crm/deals/:id/stage` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞–¥–∏–∏

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå PUT/PATCH `/api/crm/companies/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚ùå DELETE `/api/crm/companies/:id` - —É–¥–∞–ª–µ–Ω–∏–µ
- ‚ùå GET `/api/crm/companies/:id` - –¥–µ—Ç–∞–ª–∏
- ‚ùå PUT/PATCH `/api/crm/contacts/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚ùå DELETE `/api/crm/contacts/:id` - —É–¥–∞–ª–µ–Ω–∏–µ
- ‚ùå GET `/api/crm/contacts/:id` - –¥–µ—Ç–∞–ª–∏
- ‚ùå PUT/PATCH `/api/crm/deals/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚ùå DELETE `/api/crm/deals/:id` - —É–¥–∞–ª–µ–Ω–∏–µ
- ‚ùå GET `/api/crm/deals/:id` - –¥–µ—Ç–∞–ª–∏
- ‚ùå –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–ø–∏—Å–∫–æ–≤
- ‚ùå –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
- ‚ùå Bulk operations
- ‚ùå Import/Export (CSV)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ

---

### 3. BiDi Management (BD Accounts Service)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram (GramJS)

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ GET `/api/bd-accounts` - —Å–ø–∏—Å–æ–∫
- ‚úÖ POST `/api/bd-accounts/connect` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (send-code ‚Üí verify-code)
- ‚úÖ GET `/api/bd-accounts/:id/status` - —Å—Ç–∞—Ç—É—Å (isConnected, lastActivity)
- ‚úÖ GET `/api/bd-accounts/:id/dialogs` - –≤—Å–µ –¥–∏–∞–ª–æ–≥–∏ —á–µ—Ä–µ–∑ GramJS
- ‚úÖ POST `/api/bd-accounts/:id/disconnect` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ POST `/api/bd-accounts/:id/send` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- ‚úÖ GET `/api/bd-accounts/:id/sync-chats` - –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —á–∞—Ç—ã –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ POST `/api/bd-accounts/:id/sync-chats` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤
- ‚úÖ POST `/api/bd-accounts/:id/sync-start` - –∑–∞–ø—É—Å–∫ –Ω–∞—á–∞–ª—å–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–ø—Ä–æ–≥—Ä–µ—Å—Å —á–µ—Ä–µ–∑ WebSocket)
- ‚úÖ GET `/api/bd-accounts/:id/sync-status` - —Å—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ TelegramManager: GramJS, event handlers (UpdateNewMessage, UpdateNewChannelMessage, NewMessage), —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –≤ –ë–î
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–æ–ª—å–∫–æ –¥–ª—è —á–∞—Ç–æ–≤ –∏–∑ sync_chats
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ TIMEOUT, keepalive (GetState —Ä–∞–∑ –≤ 10 –º–∏–Ω)
- ‚úÖ Graceful shutdown

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤ (–∑–∞–≥—Ä—É–∑–∫–∞/—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ)
- ‚ùå POST `/api/bd-accounts/purchase` - –ø–æ–∫—É–ø–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å payment)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞

---

### 4. Pipeline System (Pipeline Service)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ GET `/api/pipeline` - —Å–ø–∏—Å–æ–∫ –≤–æ—Ä–æ–Ω–æ–∫
- ‚úÖ POST `/api/pipeline` - —Å–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Ä–æ–Ω–∫–∏
- ‚úÖ GET `/api/pipeline/stages` - —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–¥–∏–π
- ‚úÖ POST `/api/pipeline/stages` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–¥–∏–∏
- ‚úÖ PUT `/api/pipeline/clients/:id/stage` - –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–æ —Å—Ç–∞–¥–∏–∏
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå PUT `/api/pipeline/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ—Ä–æ–Ω–∫–∏
- ‚ùå DELETE `/api/pipeline/:id` - —É–¥–∞–ª–µ–Ω–∏–µ –≤–æ—Ä–æ–Ω–∫–∏
- ‚ùå PUT `/api/pipeline/stages/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–¥–∏–∏
- ‚ùå DELETE `/api/pipeline/stages/:id` - —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞–¥–∏–∏
- ‚ùå GET `/api/pipeline/stages/:id/history` - –∏—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–¥–∏–∏
- ‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è entry/exit rules
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ

---

### 5. Messaging System (Messaging Service)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è Telegram

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ GET `/api/messaging/inbox` - –≤—Ö–æ–¥—è—â–∏–µ
- ‚úÖ GET `/api/messaging/messages` - —Å–ø–∏—Å–æ–∫ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π, —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (contactId, channel, channelId, bdAccountId)
- ‚úÖ GET `/api/messaging/messages/:id` - –¥–µ—Ç–∞–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ POST `/api/messaging/send` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ BD Accounts Service (GramJS)
- ‚úÖ PATCH `/api/messaging/messages/:id/read` - –æ—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
- ‚úÖ GET `/api/messaging/chats` - —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ (–∏–∑ –ë–î, —Å bdAccountId ‚Äî —Ç–æ–ª—å–∫–æ sync —á–∞—Ç—ã)
- ‚úÖ POST `/api/messaging/chats/:chatId/mark-all-read` - –æ—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
- ‚úÖ GET `/api/messaging/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–Ω–∞–ª–∞–º/–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º/—Å—Ç–∞—Ç—É—Å–∞–º
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å BD_ACCOUNTS_SERVICE_URL –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram –≤ –ë–î (telegram_date, channel_id)

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå Email –æ—Ç–ø—Ä–∞–≤–∫–∞ (TODO –≤ –∫–æ–¥–µ)
- ‚ùå LinkedIn / Twitter –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚ùå Unified inbox –¥–ª—è –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤
- ‚ùå Threading —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ Telegram-—Ñ–ª–æ—É –≥–æ—Ç–æ–≤

---

### 6. Automation Engine (Automation Service)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ GET `/api/automation/rules` - —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª
- ‚úÖ POST `/api/automation/rules` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
- ‚úÖ Cron jobs –¥–ª—è time-based –ø—Ä–∞–≤–∏–ª

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå PUT `/api/automation/rules/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚ùå DELETE `/api/automation/rules/:id` - —É–¥–∞–ª–µ–Ω–∏–µ
- ‚ùå GET `/api/automation/rules/:id` - –¥–µ—Ç–∞–ª–∏
- ‚ùå Dry-run —Ä–µ–∂–∏–º
- ‚ùå –õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª
- ‚ùå –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
- ‚ùå UI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª (—Å–µ–π—á–∞—Å —Ç–æ–ª—å–∫–æ API)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ

---

### 7. AI Agents System (AI Service)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å OpenAI

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ Health check
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI API (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ OPENAI_API_KEY)
- ‚úÖ POST `/api/ai/drafts/generate` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –ø–æ contactId –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- ‚úÖ GET `/api/ai/drafts/:id` - –ø–æ–ª—É—á–µ–Ω–∏–µ draft
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è MESSAGE_RECEIVED, DEAL_STAGE_CHANGED ‚Äî –∞–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è draft
- ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏—è AIDraftGeneratedEvent –≤ RabbitMQ
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –≤ Redis
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç 503 –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏/placeholder API key (–±–µ–∑ –ø–∞–¥–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞)

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå POST `/api/ai/drafts/:id/approve` / reject ‚Äî –æ–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
- ‚ùå –ò—Å—Ç–æ—Ä–∏—è drafts –≤ –ë–î
- ‚ùå –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ CRM (—Å–µ–π—á–∞—Å —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π)
- ‚ùå Guardrails –∏ –ª–∏–º–∏—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ (–¥–æ—Ä–∞–±–æ—Ç–∫–∞ approve/reject –∏ –∏—Å—Ç–æ—Ä–∏—è)

---

### 8. Analytics (Analytics Service)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ GET `/api/analytics/conversion-rates` - –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- ‚úÖ GET `/api/analytics/pipeline-value` - —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤–æ—Ä–æ–Ω–∫–∏
- ‚úÖ GET `/api/analytics/team-performance` - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ GET `/api/analytics/export` - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –º–µ—Ç—Ä–∏–∫

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå –†–µ–∞–ª—Ç–∞–π–º –¥–∞—à–±–æ—Ä–¥—ã
- ‚ùå –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- ‚ùå –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- ‚ùå Scheduled reports
- ‚ùå Email –æ—Ç—á–µ—Ç—ã

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ú–æ–∂–Ω–æ –ø–æ—Å–ª–µ MVP

---

### 9. Billing & Monetization (User Service)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ GET `/api/users/subscription` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ POST `/api/users/subscription/upgrade` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Stripe (–±–∞–∑–æ–≤–∞—è)

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå Stripe webhooks
- ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ (–æ—Ç–º–µ–Ω–∞, –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
- ‚ùå Usage tracking
- ‚ùå Invoicing
- ‚ùå –ü–ª–∞–Ω—ã –∏ —Ü–µ–Ω—ã

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ

---

### 10. Team Management (Team Service)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ GET `/api/team/members` - —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚úÖ POST `/api/team/members/invite` - –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
- ‚úÖ PUT `/api/team/members/:id/role` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏
- ‚úÖ POST `/api/team/clients/assign` - –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
- ‚úÖ GET `/api/team/clients/shared` - –æ–±—â–∏–µ –∫–ª–∏–µ–Ω—Ç—ã

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå Email –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π (TODO –≤ –∫–æ–¥–µ)
- ‚ùå –ü—Ä–∏–Ω—è—Ç–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- ‚ùå –£–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- ‚ùå Activity logs

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ

---

### 11. WebSocket Service

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production-ready

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π JWT —á–µ—Ä–µ–∑ Auth Service
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–æ–º–Ω–∞—Ç—ã (org:, user:, bd-account:, chat:)
- ‚úÖ Broadcast —Å–æ–±—ã—Ç–∏–π –∏–∑ RabbitMQ (MESSAGE_RECEIVED, MESSAGE_SENT, BD_ACCOUNT_*, sync events)
- ‚úÖ Redis adapter –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ Heartbeat: ping –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫, timeout 60 —Å–µ–∫, –∞–≤—Ç–æ–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ pong
- ‚úÖ Rate limiting: –ª–∏–º–∏—Ç —Å–æ–±—ã—Ç–∏–π –≤ –º–∏–Ω—É—Ç—É –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –ª–∏–º–∏—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é (MAX_CONNECTIONS_PER_ORG)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–º–Ω–∞—Ç –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ Health check —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è reconnection –ª–æ–≥–∏–∫–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ useWebSocket)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

### 12. Campaign Service

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Å–æ–∑–¥–∞–Ω

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å:**
- ‚ùå –í–µ—Å—å —Å–µ—Ä–≤–∏—Å —Å –Ω—É–ª—è
- ‚ùå CRUD –¥–ª—è –∫–∞–º–ø–∞–Ω–∏–π
- ‚ùå –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚ùå Sequences (multi-step)
- ‚ùå –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
- ‚ùå –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π
- ‚ùå A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ (–¥–ª—è MVP —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–æ–º–ø—Ç—É)

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- ‚ùå –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
- ‚ùå –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- ‚ùå –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

### Error Handling
- ‚ùå –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- ‚ùå –ù–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö error responses
- ‚ùå –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
- ‚ùå –ù–µ—Ç error tracking

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚ùå –ù–µ—Ç input sanitization
- ‚ùå –ù–µ—Ç rate limiting
- ‚ùå –ù–µ—Ç security headers
- ‚ùå –ù–µ—Ç CSRF protection
- ‚ùå –ù–µ—Ç audit logs

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚ùå –ù–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ùå –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤
- ‚ùå –ù–µ—Ç –º–µ—Ç—Ä–∏–∫
- ‚ùå –ù–µ—Ç –∞–ª–µ—Ä—Ç–æ–≤

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚ùå –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤
- ‚ùå –ù–µ—Ç integration —Ç–µ—Å—Ç–æ–≤
- ‚ùå –ù–µ—Ç E2E —Ç–µ—Å—Ç–æ–≤

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

| –î–æ–º–µ–Ω | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã |
|-------|-----------|-------------------|
| Auth | 70% | MFA, OAuth, Password reset |
| CRM | 50% | –ü–æ–ª–Ω—ã–µ CRUD (GET by id, PUT, DELETE), –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| BD Accounts | 85% | –ú–µ–¥–∏–∞, purchase flow |
| Pipeline | 60% | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| Messaging | 85% | Email, –¥—Ä—É–≥–∏–µ –∫–∞–Ω–∞–ª—ã |
| Automation | 60% | UI, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| AI | 60% | Approve/reject, –∏—Å—Ç–æ—Ä–∏—è drafts |
| Analytics | 70% | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è |
| Billing | 50% | Webhooks, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| Team | 60% | Email –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è |
| WebSocket | 90% | ‚Äî |
| Campaign | 0% | –í–µ—Å—å —Å–µ—Ä–≤–∏—Å |

**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ~55%

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –ö—Ä–∏—Ç–∏—á–Ω–æ (MVP)
1. **–ü–æ–ª–Ω—ã–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏** (CRM, Pipeline –∏ –¥—Ä. ‚Äî GET by id, PUT, DELETE)
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** (–±—ç–∫–µ–Ω–¥ + —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)
3. **Error handling** (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
4. ~~Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è~~ ‚úÖ —Å–¥–µ–ª–∞–Ω–æ
5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** (rate limiting, sanitization, security headers)
6. **Campaign Service** (—Å–æ–∑–¥–∞–Ω–∏–µ —Å –Ω—É–ª—è)

### –í–∞–∂–Ω–æ (–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç)
7. Email –æ—Ç–ø—Ä–∞–≤–∫–∞ (–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è)
8. MFA
9. AI Service: approve/reject drafts, –∏—Å—Ç–æ—Ä–∏—è
10. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–µ—Ç—Ä–∏–∫–∏, –∞–ª–µ—Ä—Ç—ã)
11. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (unit, integration, E2E)

### –ú–æ–∂–Ω–æ –ø–æ—Å–ª–µ MVP
12. UX —É–ª—É—á—à–µ–Ω–∏—è (skeletons, toasts, drag-and-drop Kanban)
13. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–∫–µ—à, –∏–Ω–¥–µ–∫—Å—ã, code splitting)
14. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (Email/LinkedIn –∫–∞–Ω–∞–ª—ã, –º–µ–¥–∏–∞ –≤ Telegram)

